{"ast":null,"code":"import _readOnlyError from \"@babel/runtime/helpers/readOnlyError\";\nimport { LOGIN_SUCCESS, LOGOUT, ONLOAD, INITIALIZE, LOAD_PARA } from \"./type\";\nimport AuthService from \"../services/authService\";\nimport dataFetchService from \"../services/dataFetchService\";\nimport globalconst from \"../constant/globalvariables\";\nimport { initialize, getParagraph } from \"./fetch\";\nexport var login = function login(user) {\n  return function (dispatch) {\n    return AuthService.logIn(user).then(function (response) {\n      return new Promise(function (res, rej, response) {\n        var apiURL = globalconst.apiBaseUrl + \"/api/paragraph\" + \"?language=\" + response.data.user.languages[0].key + \"&page=1\";\n        dispatch({\n          type: LOGIN_SUCCESS,\n          payload: {\n            user: response.bhaashadan.user,\n            data: {\n              next: apiURL\n            }\n          }\n        });\n        res(dataFetchService.getParagraph({\n          selectedLanguage: response.data.user.languages[0],\n          selectedWorkType: \"Pending\",\n          nextUrl: apiURL\n        }));\n      }).then(function (paraResponse) {\n        dispatch({\n          type: LOAD_PARA,\n          payload: {\n            selectedLanguage: response.data.user.languages[0],\n            selectedWorkType: \"Pending\",\n            data: paraResponse.data,\n            alreadyExists: false,\n            nextUrl: globalconst.apiBaseUrl + \"/api/paragraph\" + \"?language=\" + response.data.user.languages[0].key + \"&page=1\"\n          }\n        });\n        return {\n          loginResponse: response,\n          paraResponse: paraResponse\n        };\n      }).catch(function (error) {\n        return {\n          loginResponse: {\n            data: {\n              user: response.bhaashadan.user\n            }\n          },\n          paraResponse: error\n        };\n      });\n    });\n  };\n};\nexport var logout = function logout() {\n  return function (dispatch) {\n    return AuthService.logOut().then(function (response) {\n      if (response.status === \"success\") {\n        dispatch({\n          type: LOGOUT,\n          payload: {\n            user: null\n          }\n        });\n        Promise.resolve();\n        return response;\n      }\n    });\n  };\n};\nexport var onLoad = function onLoad(user) {\n  return function (dispatch) {\n    return AuthService.onLoad(user).then(function (response) {\n      return new Promise(function (resolvefn, rejectfn, response) {\n        var apiURL = \"\";\n        if (response && response.bhaashadan) {\n          globalconst.apiBaseUrl + \"/api/paragraph\" + \"?language=\" + response.bhaashadan.user.languages[0].key + \"&page=1\", _readOnlyError(\"apiURL\");\n          dispatch({\n            type: LOGIN_SUCCESS,\n            payload: {\n              user: response.bhaashadan.user,\n              data: {\n                next: apiURL\n              }\n            }\n          });\n          resolvefn(dataFetchService.getParagraph({\n            selectedLanguage: response.bhaashadan.user.languages[0],\n            selectedWorkType: \"Pending\",\n            nextUrl: apiURL\n          }));\n        }\n      }).then(function (paraResponse) {\n        dispatch({\n          type: LOAD_PARA,\n          payload: {\n            selectedLanguage: response.bhaashadan.user.languages[0],\n            selectedWorkType: \"Pending\",\n            data: paraResponse.data,\n            alreadyExists: false,\n            nextUrl: globalconst.apiBaseUrl + \"/api/paragraph\" + \"?language=\" + response.bhaashadan.user.languages[0].key + \"&page=1\"\n          }\n        });\n        return {\n          loginResponse: {\n            data: {\n              user: response.bhaashadan.user\n            }\n          },\n          paraResponse: paraResponse\n        };\n      }).catch(function (error) {\n        return error;\n      });\n    });\n  };\n};","map":{"version":3,"names":["LOGIN_SUCCESS","LOGOUT","ONLOAD","INITIALIZE","LOAD_PARA","AuthService","dataFetchService","globalconst","initialize","getParagraph","login","user","dispatch","logIn","then","response","Promise","res","rej","apiURL","apiBaseUrl","data","languages","key","type","payload","bhaashadan","next","selectedLanguage","selectedWorkType","nextUrl","paraResponse","alreadyExists","loginResponse","catch","error","logout","logOut","status","resolve","onLoad","resolvefn","rejectfn","_readOnlyError"],"sources":["C:/Users/vinee/Desktop/BhaashadanWithUserManagement/Bhaashadan/src/actions/auth.js"],"sourcesContent":["import { LOGIN_SUCCESS, LOGOUT,ONLOAD,INITIALIZE, LOAD_PARA } from \"./type\";\r\nimport AuthService from \"../services/authService\";\r\nimport dataFetchService from \"../services/dataFetchService\";\r\nimport globalconst from \"../constant/globalvariables\";\r\nimport { initialize,getParagraph } from \"./fetch\";\r\n/*\r\nexport const login = (user) => () => {\r\n  return function (dispatch){\r\n    AuthService.logIn(user).then(\r\n      (response) => {\r\n        \r\n        alert(JSON.stringify(response));\r\n        if (response.status===200) {\r\n          localStorage.setItem('userToken', axios.defaults.headers.common.Authorization)\r\n          const user=response.data.user;\r\n          alert(JSON.stringify(user));\r\n          dispatch({\r\n            type: LOGIN_SUCCESS,\r\n            payload: {user:response.data.user }\r\n  \r\n          })\r\n  \r\n         dispatch(getParagraph({selectedLanguageKey:response.data.user.languages[0].key,workType:\"Pending\"}));\r\n          \r\n  \r\n        }\r\n  \r\n          Promise.resolve();\r\n          return response\r\n  \r\n        }\r\n      ,\r\n      (error) => {\r\n  \r\n  Promise.reject();\r\n  \r\n        return error;\r\n      }\r\n    );\r\n  }\r\n}\r\n*/\r\nexport const login = (user) => (dispatch) => {\r\n   \r\n  return AuthService.logIn(user).then(\r\n    (response) => {\r\n     // const apiURL=globalconst.apiBaseUrl+\"/api/paragraph\"+\"?language=\"+response.data.user.languages[0].key+\"&page=1\";\r\n      //alert(\"login service\"+JSON.stringify(response));\r\n \r\n        return new Promise(function(res, rej,response){\r\n          const apiURL=globalconst.apiBaseUrl+\"/api/paragraph\"+\"?language=\"+response.data.user.languages[0].key+\"&page=1\";\r\n          dispatch({\r\n            type: LOGIN_SUCCESS,\r\n            payload: {user:response.bhaashadan.user,data:{next:apiURL}}\r\n  \r\n          });\r\n         // if(response.status==200){\r\n          \r\n          res(dataFetchService.getParagraph({selectedLanguage:response.data.user.languages[0],selectedWorkType:\"Pending\",nextUrl:apiURL}));\r\n         // }\r\n         // else\r\n           // rej({loginResponse:response,paraResponse:\"Not called\"});\r\n      }).then((paraResponse) =>  {\r\n       // alert(\"paraResponse\"+paraResponse);\r\n        dispatch({\r\n        type: LOAD_PARA,\r\n        payload: {selectedLanguage:response.data.user.languages[0],selectedWorkType:\"Pending\",data:paraResponse.data,alreadyExists:false,\r\n        nextUrl:globalconst.apiBaseUrl+\"/api/paragraph\"+\"?language=\"+response.data.user.languages[0].key+\"&page=1\" }\r\n\r\n      })\r\n    return {loginResponse:response,paraResponse:paraResponse}\r\n    }\r\n    \r\n    ).catch((error)=>{\r\n      return {loginResponse:{data:{user:response.bhaashadan.user}},paraResponse:error};\r\n    })\r\n  \r\n}\r\n  );\r\n};\r\n\r\nexport const logout = () => (dispatch) => {\r\n  return AuthService.logOut().then((response) => {\r\n    if (response.status === \"success\") {\r\n      \r\n      dispatch({\r\n        type: LOGOUT,\r\n        payload:{user:null}\r\n      });\r\n      \r\n      Promise.resolve();\r\n      return response;\r\n    }\r\n  });\r\n};\r\n\r\nexport const onLoad = (user) => (dispatch) => {\r\n  return  AuthService.onLoad(user).then((response) => {\r\n   // let userObj=response;\r\n   //const apiURL=globalconst.apiBaseUrl+\"/api/paragraph\"+\"?language=\"+response.bhaashadan.user.languages[0].key+\"&page=1\";\r\n    return new Promise(function(resolvefn, rejectfn,response){\r\n      //alert(\"resolvefn\"+JSON.stringify(resolvefn)+ \" rejectfn \"+JSON.stringify(rejectfn));\r\n      const apiURL=\"\";\r\n      if(response && response.bhaashadan )\r\n      {\r\n         apiURL=globalconst.apiBaseUrl+\"/api/paragraph\"+\"?language=\"+response.bhaashadan.user.languages[0].key+\"&page=1\";\r\n      dispatch({\r\n        type: LOGIN_SUCCESS,\r\n        payload: {user:response.bhaashadan.user,data:{next:apiURL}}\r\n\r\n      });\r\n    //  if(resolvefn)\r\n    //const apiURL=globalconst.apiBaseUrl+\"/api/paragraph\"+\"?language=\"+response.bhaashadan.user.languages[0].key+\"&page=1\";\r\n     resolvefn(dataFetchService.getParagraph({selectedLanguage:response.bhaashadan.user.languages[0],selectedWorkType:\"Pending\",nextUrl:apiURL}));\r\n      }\r\n     // else\r\n     // rejectfn( response);\r\n  }).then((paraResponse) =>  {\r\n    //alert(\"paraResponse\"+paraResponse);\r\n    dispatch({\r\n    type: LOAD_PARA,\r\n    payload: {selectedLanguage:response.bhaashadan.user.languages[0],selectedWorkType:\"Pending\",data:paraResponse.data,alreadyExists:false,\r\n    nextUrl:globalconst.apiBaseUrl+\"/api/paragraph\"+\"?language=\"+response.bhaashadan.user.languages[0].key+\"&page=1\" }\r\n\r\n  })\r\nreturn {loginResponse:{data:{user:response.bhaashadan.user}},paraResponse:paraResponse}\r\n}).catch(error=>{\r\n  return error;\r\n}\r\n\r\n)\r\n\r\n\r\n\r\n  });\r\n};\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
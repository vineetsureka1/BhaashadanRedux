{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nvar logIn = function () {\n  var _ref = _asyncToGenerator(function* (values) {\n    alert(values['username']);\n    var errorMsg = null;\n    var endpoint = 'api/auth/';\n    var payload = {\n      username: values['username'],\n      password: values['password']\n    };\n    axios.defaults.baseURL = 'https://bhaasha.iiit.ac.in/crowd';\n    axios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';\n    var rememberMe = values['rememberMe'];\n    axios({\n      method: 'post',\n      url: endpoint,\n      data: payload\n    }).then(function (response) {\n      var _response$data = response.data,\n        token = _response$data.token,\n        user = _response$data.user;\n      axios.defaults.headers.common.Authorization = `Token ${token}`;\n      var initialState = [];\n      var lan = user.language.split(',');\n      user.languages = [];\n      for (var i = 0; i < lan.length; i++) {\n        var newLan = {};\n        newLan.key = lan[i];\n        newLan.item = lan[i].charAt(0).toUpperCase() + lan[i].substr(1).toLowerCase();\n        user.languages.push(newLan);\n        var tempObject = {};\n        tempObject.id = lan[i];\n        tempObject.title = newLan.item;\n        var job = {\n          isPrevApiCalled: false,\n          count: 1,\n          items: [],\n          pagenumber: 1,\n          lastPageNumber: -1,\n          nextPage: null,\n          scrollIndex: 0,\n          hasMore: true\n        };\n        var paragraph = {\n          isPrevApiCalled: false,\n          count: 1,\n          items: [],\n          pagenumber: 1,\n          lastPageNumber: -1,\n          nextPage: null,\n          scrollIndex: 0,\n          hasMore: true\n        };\n        tempObject.job = job;\n        tempObject.paragraph = paragraph;\n        initialState.push(tempObject);\n      }\n      if (rememberMe) {\n        var bhaashadanObject = {};\n        bhaashadanObject.user = user;\n        bhaashadanObject.token = axios.defaults.headers.common.Authorization;\n        setCookie('bhaashadan', JSON.stringify(bhaashadanObject), {\n          path: '/',\n          expires: new Date(dayjs(Date.now()).add(30, 'day').format(\"YYYY-MM-DD\"))\n        });\n      }\n    }).catch(function (error) {\n      if (error.response.data.non_field_errors != null) {\n        alert(\"API call fails with error:\" + error.response.data.non_field_errors);\n        console.log(error.response.data.non_field_errors);\n      } else {\n        alert(\"API call fails with error:\" + error);\n        console.log(error);\n      }\n    });\n  });\n  return function logIn(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar logOut = function () {\n  var _ref2 = _asyncToGenerator(function* () {\n    AsyncStorage.clear();\n    return {\n      status: \"success\",\n      message: \"You are logged out\"\n    };\n  });\n  return function logOut() {\n    return _ref2.apply(this, arguments);\n  };\n}();\nexport default {\n  logIn: logIn,\n  logOut: logOut\n};","map":{"version":3,"names":["AsyncStorage","logIn","_ref","_asyncToGenerator","values","alert","errorMsg","endpoint","payload","username","password","axios","defaults","baseURL","headers","post","rememberMe","method","url","data","then","response","_response$data","token","user","common","Authorization","initialState","lan","language","split","languages","i","length","newLan","key","item","charAt","toUpperCase","substr","toLowerCase","push","tempObject","id","title","job","isPrevApiCalled","count","items","pagenumber","lastPageNumber","nextPage","scrollIndex","hasMore","paragraph","bhaashadanObject","setCookie","JSON","stringify","path","expires","Date","dayjs","now","add","format","catch","error","non_field_errors","console","log","_x","apply","arguments","logOut","_ref2","clear","status","message"],"sources":["C:/Users/vinee/Desktop/BhaashadanWithUserManagement/Bhaashadan/src/services/authService.js"],"sourcesContent":["import AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nconst logIn = async (values) => {\r\n  alert(values['username']);\r\n  var errorMsg=null;\r\n  //alert(values['rememberMe']);\r\n  const endpoint ='api/auth/';\r\n    //alert(endpoint);\r\n    const payload = { username: values['username'], password: values['password'] } ;\r\n    //alert(\"input username=\"+values['username']);\r\n    axios.defaults.baseURL = 'https://bhaasha.iiit.ac.in/crowd';\r\n    axios.defaults.headers.post['Content-Type'] ='application/x-www-form-urlencoded';\r\n    const rememberMe=values['rememberMe'];\r\n    \r\n\t//alert(rememberMe+\" rememberMe\")\r\n\t// let self=props;\r\n    axios({\r\n        method: 'post',\r\n        url: endpoint,\r\n        data: payload\r\n      }).then(function (response) {\r\n        const { token,user} = response.data;\r\n        //alert(\"output username=\"+user.first_name);\r\n        axios.defaults.headers.common.Authorization = `Token ${token}`;\r\n\t\tconst initialState=[];\r\n\t\t\r\n\t\tconst lan = user.language.split(',');\r\n          user.languages=[];\r\n          for(var i=0;i<lan.length;i++){\r\n            var newLan={};\r\n            newLan.key=lan[i];\r\n\t\t\tnewLan.item=lan[i].charAt(0).toUpperCase() + lan[i].substr(1).toLowerCase();\r\n\t\t\tuser.languages.push(newLan);\r\n\t\t\tconst tempObject={};\r\n\t\t\ttempObject.id=lan[i];\r\n\t\t\ttempObject.title=newLan.item;\r\n\t\t\tvar job={\r\n\t\t\tisPrevApiCalled:false,\r\n\t\t\tcount:1,\r\n\t\t\titems:[],\r\n\t\t\tpagenumber:1,\r\n\t\t\tlastPageNumber:-1,\r\n\t\t\tnextPage:null,\r\n\t\t\tscrollIndex:0,\r\n\t\t\thasMore:true\r\n\t\t\t}\r\n\t\t\tvar paragraph={\r\n\t\t\tisPrevApiCalled:false,\r\n\t\t\tcount:1,\r\n\t\t\titems:[],\r\n\t\t\tpagenumber:1,\r\n\t\t\tlastPageNumber:-1,\r\n\t\t\tnextPage:null,\r\n\t\t\tscrollIndex:0,\r\n\t\t\thasMore:true\r\n\t\t\t}\r\n\t\t\ttempObject.job=job;\r\n\t\t\ttempObject.paragraph=paragraph;\r\n\t\t\tinitialState.push(tempObject);\r\n            \r\n          }\r\n          if(rememberMe){\r\n          var bhaashadanObject={};\r\n          bhaashadanObject.user=user;\r\n          bhaashadanObject.token=axios.defaults.headers.common.Authorization;\r\n          setCookie('bhaashadan',JSON.stringify(bhaashadanObject),{path:'/',expires:new Date(dayjs( Date.now()).add(30,'day').format(\"YYYY-MM-DD\"))})\r\n          }\r\n\t\t // self.navigation.navigate('UserDashboard',{user:user});\r\n      })\r\n      .catch(function (error) {\r\n        \r\n        if(error.response.data.non_field_errors!=null)\r\n        {\r\n        alert(\"API call fails with error:\"+error.response.data.non_field_errors);\r\n        console.log(error.response.data.non_field_errors);\r\n        }\r\n        else{\r\n        alert(\"API call fails with error:\"+error);\r\n        console.log(error);\r\n        }\r\n      });\r\n}\r\nconst logOut = async () => {\r\n  AsyncStorage.clear();\r\n  return {\r\n    status: \"success\",\r\n    message: \"You are logged out\",\r\n  };\r\n};\r\nexport default {\r\n  logIn,\r\n  logOut,\r\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
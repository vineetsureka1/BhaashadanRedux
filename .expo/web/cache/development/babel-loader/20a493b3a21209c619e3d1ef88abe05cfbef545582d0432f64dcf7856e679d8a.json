{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport React, { useState, useEffect } from 'react';\nimport Image from \"react-native-web/dist/exports/Image\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { AntDesign } from '@expo/vector-icons';\nimport * as ImagePicker from 'expo-image-picker';\nimport GlobalStyles from \"../constant/GlobalStyles\";\nimport axios from \"axios\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function UploadImage(props) {\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    image = _useState2[0],\n    setImage = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    base64Image = _useState4[0],\n    setBase64Image = _useState4[1];\n  useEffect(function () {\n    checkForCameraRollPermission();\n  }, []);\n  function toggleCameraType() {\n    setType(function (current) {\n      return current === CameraType.back ? CameraType.front : CameraType.back;\n    });\n  }\n  var uploadImageToserver = function () {\n    var _ref = _asyncToGenerator(function* (props) {\n      axios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';\n      var formData = new FormData();\n      formData.append('paragraph_id', props.item.id);\n      formData.append('image', base64Image);\n      axios({\n        method: 'Post',\n        url: 'api/paragraph/post/',\n        data: formData,\n        headers: axios.defaults.headers\n      }).then(function (response) {\n        console.log(response.data);\n      }).catch(function (error) {\n        if (error.response.data.non_field_errors != null) {\n          alert(\"API call fails with error:\" + error.response.data.non_field_errors);\n          console.log(error.response.data.non_field_errors);\n        } else {\n          alert(\"API call fails with error:\" + error);\n          console.log(error);\n        }\n      });\n      props.onUploadAction();\n    });\n    return function uploadImageToserver(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  var addImage = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      var _image = yield ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.Images,\n        allowsEditing: true,\n        aspect: [4, 4],\n        base64: true,\n        quality: 1\n      });\n      if (!_image.canceled) {\n        setImage(_image.assets[0].uri);\n        setBase64Image(_image.assets[0].base64);\n      }\n    });\n    return function addImage() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var takeCapture = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      var _image = ImagePicker.launchCameraAsync();\n      console.log(JSON.stringify(_image));\n      if (!_image.canceled) {\n        setImage(_image.assets);\n      }\n    });\n    return function takeCapture() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var checkForCameraRollPermission = function () {\n    var _ref4 = _asyncToGenerator(function* () {\n      var _yield$ImagePicker$ge = yield ImagePicker.getMediaLibraryPermissionsAsync(),\n        status = _yield$ImagePicker$ge.status;\n      if (status !== 'granted') {\n        alert(\"Please grant camera roll permissions inside your system's settings\");\n      } else {\n        console.log('Media Permissions are granted');\n      }\n    });\n    return function checkForCameraRollPermission() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  return _jsxs(View, {\n    children: [_jsxs(View, {\n      style: imageUploaderStyles.container,\n      children: [image && _jsx(Image, {\n        source: {\n          uri: image\n        },\n        style: {\n          width: 100,\n          height: 100\n        }\n      }), _jsx(View, {\n        style: imageUploaderStyles.uploadBtnContainer,\n        children: _jsxs(TouchableOpacity, {\n          onPress: addImage,\n          style: imageUploaderStyles.uploadBtn,\n          children: [_jsx(Text, {\n            style: {\n              fontSize: 10\n            },\n            children: _jsx(\"center\", {\n              children: \"Image size should be between 100Kb - 5Mb\"\n            })\n          }), _jsxs(Text, {\n            children: [image ? 'Edit' : 'Select', \" Image\"]\n          }), _jsx(AntDesign, {\n            name: \"camera\",\n            size: 20,\n            color: \"black\"\n          })]\n        })\n      })]\n    }), _jsx(TouchableOpacity, {\n      onPress: function onPress() {\n        return uploadImageToserver(props);\n      },\n      disabled: image ? false : true,\n      style: imageUploaderStyles.uploadBtn,\n      children: _jsx(Text, {\n        style: [_objectSpread(_objectSpread(_objectSpread({}, GlobalStyles.button), GlobalStyles.backGroundVeryLightGreen), {}, {\n          width: 100\n        })],\n        children: \"Upload Image\"\n      })\n    })]\n  });\n}\nvar imageUploaderStyles = StyleSheet.create({\n  container: {\n    height: 120,\n    width: 100,\n    backgroundColor: '#efefef',\n    position: 'relative',\n    borderRadius: 5,\n    overflow: 'hidden',\n    alignSelf: 'center',\n    justifyContent: 'center'\n  },\n  uploadBtnContainer: {\n    opacity: 0.7,\n    position: 'absolute',\n    right: 0,\n    bottom: 0,\n    backgroundColor: 'lightgrey',\n    width: '100%',\n    height: '25%'\n  },\n  uploadBtn: {\n    display: 'flex',\n    alignItems: \"center\",\n    justifyContent: 'center',\n    margin: 10\n  }\n});","map":{"version":3,"names":["React","useState","useEffect","Image","View","TouchableOpacity","Text","StyleSheet","AntDesign","ImagePicker","GlobalStyles","axios","jsx","_jsx","jsxs","_jsxs","UploadImage","props","_useState","_useState2","_slicedToArray","image","setImage","_useState3","_useState4","base64Image","setBase64Image","checkForCameraRollPermission","toggleCameraType","setType","current","CameraType","back","front","uploadImageToserver","_ref","_asyncToGenerator","defaults","headers","post","formData","FormData","append","item","id","method","url","data","then","response","console","log","catch","error","non_field_errors","alert","onUploadAction","_x","apply","arguments","addImage","_ref2","_image","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","Images","allowsEditing","aspect","base64","quality","canceled","assets","uri","takeCapture","_ref3","launchCameraAsync","JSON","stringify","_ref4","_yield$ImagePicker$ge","getMediaLibraryPermissionsAsync","status","children","style","imageUploaderStyles","container","source","width","height","uploadBtnContainer","onPress","uploadBtn","fontSize","name","size","color","disabled","_objectSpread","button","backGroundVeryLightGreen","create","backgroundColor","position","borderRadius","overflow","alignSelf","justifyContent","opacity","right","bottom","display","alignItems","margin"],"sources":["C:/Users/vinee/Desktop/BhaashadanWithUserManagement/Bhaashadan/src/customComponent/ImagePickerCamera.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Image, View, TouchableOpacity, Text, StyleSheet } from 'react-native';\nimport { AntDesign } from '@expo/vector-icons';\nimport * as ImagePicker from 'expo-image-picker';\nimport GlobalStyles from '../constant/GlobalStyles';\nimport axios from \"axios\";\n//import ImgToBase64 from 'react-native-image-base64';\n\n//import { Camera, CameraType } from 'expo-camera';\n\nexport default function UploadImage(props) {\n  const [image, setImage] = useState(null);\n  const [base64Image, setBase64Image] = useState(null);\n  \n  useEffect(() => {\n    checkForCameraRollPermission()\n  }, []);\n  function toggleCameraType() {\n    setType(current => (current === CameraType.back ? CameraType.front : CameraType.back));\n  }\n  const  uploadImageToserver=async(props)=>{\n \n  axios.defaults.headers.post['Content-Type'] ='application/x-www-form-urlencoded';\n  const formData = new FormData();\n  formData.append('paragraph_id',props.item.id);\n  formData.append('image',base64Image);\n // const headers={Content-Type:\"application/x-www-form-urlencoded\"}\n  //payload.image=\n  axios({\n    method: 'Post',\n    url: 'api/paragraph/post/',\n    data: formData,\n    headers:axios.defaults.headers\n  }).then(function (response) {\n    //alert(JSON.stringify(response.data) );\n\n    \n    console.log(response.data);\n    \n    })\n    .catch(function (error) {\n       \n      if(error.response.data.non_field_errors!=null)\n        {\n        alert(\"API call fails with error:\"+error.response.data.non_field_errors);\n        console.log(error.response.data.non_field_errors);\n        }\n        else{\n        alert(\"API call fails with error:\"+error);\n        console.log(error);\n        }\n    });\n    props.onUploadAction();\n    //props.onPressAction();\n  }\n  const addImage = async () => {\n    let _image = await ImagePicker.launchImageLibraryAsync({\n      mediaTypes: ImagePicker.MediaTypeOptions.Images,\n      allowsEditing: true,\n      aspect: [4,4],\n      base64:true,\n      quality: 1,\n    });\n    //console.log(JSON.stringify(_image));\n    if (!_image.canceled) {\n\n      setImage(_image.assets[0].uri);\n      setBase64Image(_image.assets[0].base64);\n    }\n  };\n  const takeCapture = async () => {\n    let _image =  ImagePicker.launchCameraAsync();\n    console.log(JSON.stringify(_image));\n    if (!_image.canceled) {\n      setImage(_image.assets);\n     // alert(_image);\n    }\n  };\n  const  checkForCameraRollPermission=async()=>{\n    const { status } = await ImagePicker.getMediaLibraryPermissionsAsync();\n    if (status !== 'granted') {\n      alert(\"Please grant camera roll permissions inside your system's settings\");\n    }else{\n      console.log('Media Permissions are granted')\n    }\n};\n  return (\n    <View>\n            <View style={imageUploaderStyles.container}>\n                {\n                    image  && <Image source={{ uri: image }} style={{ width: 100, height: 100 }} />\n                }\n                    <View style={imageUploaderStyles.uploadBtnContainer}>\n                        <TouchableOpacity onPress={addImage} style={imageUploaderStyles.uploadBtn} >\n                          <Text style={{fontSize:10}}><center>Image size should be between 100Kb - 5Mb</center></Text>\n                            <Text>{image ? 'Edit' : 'Select'} Image</Text>\n                            <AntDesign name=\"camera\" size={20} color=\"black\" />\n                        </TouchableOpacity>\n                     \n                    </View>\n            </View>\n               <TouchableOpacity\n                onPress={()=>uploadImageToserver(props)} \n                disabled={image? false:true } \n                style={imageUploaderStyles.uploadBtn}>\n              \n               <Text style={[{...GlobalStyles.button,...GlobalStyles.backGroundVeryLightGreen,width:100}]}>Upload Image</Text> \n           </TouchableOpacity>\n           </View>\n\n  );\n}\nconst imageUploaderStyles=StyleSheet.create({\n    container:{\n        //elevation:2,\n        height:120,\n        width:100,\n        backgroundColor:'#efefef',\n        position:'relative',\n        borderRadius:5,\n        overflow:'hidden',\n        alignSelf:'center',\n        justifyContent:'center',\n    },\n    uploadBtnContainer:{\n        opacity:0.7,\n        position:'absolute',\n        right:0,\n        bottom:0,\n        backgroundColor:'lightgrey',\n        width:'100%',\n        height:'25%',\n    },\n    uploadBtn:{\n        display:'flex',\n        alignItems:\"center\",\n        justifyContent:'center',\n        margin:10,\n        \n\n    }\n})"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}